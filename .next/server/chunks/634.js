exports.id=634,exports.ids=[634],exports.modules={1195:(e,t,a)=>{"use strict";a.a(e,async(e,s)=>{try{a.d(t,{R:()=>n});var r=a(1428),o=e([r]);let n=(r=(o.then?(await o)():o)[0]).default.create({baseURL:"https://nodejs-hw-mongodb-auth-syz8.onrender.com",withCredentials:!0});r.default.defaults.withCredentials=!0,n.interceptors.response.use(e=>e,e=>(e.response?.status===401&&(console.error("Unauthorized, logging out..."),localStorage.removeItem("token"),window.location.href="/"),Promise.reject(e))),r.default.create({baseURL:"https://66b1f8e71ca8ad33d4f5f63e.mockapi.io"}).interceptors.response.use(e=>e,e=>(e.response?.status===401&&(console.error("Unauthorized, logging out..."),localStorage.removeItem("token"),window.location.href="/"),Promise.reject(e))),s()}catch(e){s(e)}})},2567:e=>{e.exports={item:"SendResetEmailForm_item__uZ_KQ",items:"SendResetEmailForm_items__ahDJx",label:"SendResetEmailForm_label__YRZ_k",btn:"SendResetEmailForm_btn__1BgZH",LoginForm:"SendResetEmailForm_LoginForm__A_YEi",messag:"SendResetEmailForm_messag__MBtkf",inp:"SendResetEmailForm_inp__raTHV"}},4800:(e,t,a)=>{"use strict";a.a(e,async(e,s)=>{try{a.d(t,{$4:()=>y,E8:()=>h,EV:()=>i,LE:()=>E,WT:()=>g,dt:()=>k,je:()=>m,jf:()=>f,kz:()=>u,wz:()=>d,xw:()=>p,yd:()=>R});var r=a(1195),o=a(9198),n=a(8129),c=e([r,o,n]);[r,o,n]=c.then?(await c)():c;let i=e=>{if(console.log("\uD83D\uDD0E Checking accessToken in setAuthHeader:",e),!e){console.warn("⚠️ No access token provided. Authorization header NOT set.");return}r.R.defaults.headers.common.Authorization=`Bearer ${e}`,console.log("✅ AUTH HEADER SET:",r.R.defaults.headers.common.Authorization)},l=()=>{delete r.R.defaults.headers.common.Authorization},u=(0,o.createAsyncThunk)("auth/register",async(e,t)=>{try{let t=await r.R.post("/auth/register",e,{headers:{Accept:"application/json","Content-Type":"application/json"}});return(0,n.V)("You Registers Succesfull !"),console.log("REGISTER RESPONSE:",t.data),i(t.data.data.accessToken),localStorage.setItem("token",t.data.data.accessToken),{status:t.status,data:t.data}}catch(a){let e=a.response?.data?.message||"Error register!";return t.rejectWithValue(e)}}),d=(0,o.createAsyncThunk)("user/getUser",async(e,t)=>{try{let e=await r.R.get("/users");return(0,n.V)("You get on User Succesfull"),e.data}catch(a){if(a.response?.data?.data?.message)return t.rejectWithValue(a.response.data.data.message);let e=a.response?.data?.message||"Error get All User!";return t.rejectWithValue(e)}}),h=(0,o.createAsyncThunk)("auth/login",async(e,t)=>{try{let a=await r.R.post("/auth/login",e);if(console.log("\uD83D\uDD0D API LOGIN RESPONSE:",a.data),console.log("\uD83D\uDD0D API LOGIN TOKEN:",a.data?.data?.accessToken),!a.data||!a.data.data.accessToken)return console.error("❌ API response does not contain accessToken!"),t.rejectWithValue("No accessToken in response");return i(a.data.data.accessToken),localStorage.setItem("jwt-token",a.data.data.accessToken),(0,n.V)("You Login Succesfull"),{status:a.status,data:a.data}}catch(e){return console.error("❌ LOGIN ERROR:",e.response?.data||e.message),t.rejectWithValue("Error during login!")}}),m=(0,o.createAsyncThunk)("auth/logout",async(e,t)=>{try{await r.R.post("/auth/logout"),(0,n.V)("You Logout Succesfull"),l(),localStorage.removeItem("token")}catch(e){return t.rejectWithValue("Error logOut !")}}),g=(0,o.createAsyncThunk)("auth/sendResetEmail",async(e,{rejectWithValue:t})=>{try{let t=await r.R.post("/auth/send-reset-email",{email:e});return(0,n.V)("Send Reset Email on you email Succesfull"),t.data}catch(e){return t(e.response?.data||"Error sending email")}}),p=(0,o.createAsyncThunk)("auth/resetPassword",async({newPassword:e,token:t},{rejectWithValue:a})=>{try{let a=await r.R.post("/auth/reset-pwd",{newPassword:e,token:t});return(0,n.V)("Reset on you password Succesfull"),a.data}catch(e){return a(e.response?.data||"Error resetting password")}}),y=(0,o.createAsyncThunk)("auth/refresh",async(e,{getState:t,rejectWithValue:a})=>{try{let e=t().auth.accessToken;if(console.log("\uD83D\uDD0D REFRESH TOKEN BEFORE REQUEST:",e),!e)return a("No access token found");i(e),(0,n.V)("Refresh of token Succesfull");let s=await r.R.get("/auth/refresh");return console.log("\uD83D\uDFE2 User data from refresh:",s.data),localStorage.setItem("jwt-token",s.data.accessToken||""),s.data}catch(e){if(e.response?.status===401)return console.error("❌ Unauthorized, logging out..."),a("Unauthorized");return a("Error refreshing user")}}),f=(0,o.createAsyncThunk)("user/confirm-email",async({token:e},t)=>{try{let t=await r.R.post("/auth/confirm-email",{token:e});return console.log(t),i(t.data.data.accessToken),(0,n.V)("Email confirmed"),t.data}catch(a){if(console.log(a),a.response?.data?.data?.message)return t.rejectWithValue(a.response.data.data.message);let e=a.response?.data?.message||"Email has not been confirmed";return t.rejectWithValue(e)}}),k=(0,o.createAsyncThunk)("user/get-oauth-url",async(e,t)=>{try{let{data:e}=await r.R.get("/auth/get-oauth-url");return e}catch(e){if(e.response?.data?.data?.message)return t.rejectWithValue(e.response.data.data.message);return(0,n.U)("Oauth url failed"),t.rejectWithValue(e.message)}}),E=(0,o.createAsyncThunk)("user/refresh-session",async(e,t)=>{try{let e=await r.R.post("/auth/refresh");return i(e.data.accessToken),e.data}catch(e){return t.rejectWithValue(e.message)}},{condition:(e,t)=>{let a=t.getState();return null!==a.auth.accessToken}}),R=(0,o.createAsyncThunk)("user/confirm-oauth",async(e,t)=>{try{let t=await r.R.post("/auth/confirm-oauth",{code:e});return i(t.data.accessToken),t.data}catch(a){if(a.response?.data?.data?.message)return t.rejectWithValue(a.response.data.data.message);let e=a.response?.data?.message||"Oauth confirm failed";return(0,n.U)("confirmOauth url Error failed"),t.rejectWithValue(e)}});s()}catch(e){s(e)}})},8129:(e,t,a)=>{"use strict";a.a(e,async(e,s)=>{try{a.d(t,{U:()=>c,V:()=>n});var r=a(4391),o=e([r]);r=(o.then?(await o)():o)[0];let n=e=>r.toast.success(e,{position:"top-right",autoClose:5e3,hideProgressBar:!1,closeOnClick:!0,pauseOnHover:!0,draggable:!1,progress:void 0,theme:"colored",transition:r.Zoom}),c=e=>r.toast.error(e,{position:"top-right",autoClose:5e3,hideProgressBar:!1,closeOnClick:!0,pauseOnHover:!0,draggable:!1,progress:void 0,theme:"colored",transition:r.Zoom});s()}catch(e){s(e)}})},8634:(e,t,a)=>{"use strict";a.a(e,async(e,s)=>{try{a.d(t,{A:()=>g});var r=a(8732),o=a(2567),n=a.n(o),c=a(3294),i=a(2544),l=a(4800),u=a(7843),d=a(4391);a(1643);var h=a(2015),m=e([l,u,d]);[l,u,d]=m.then?(await m)():m;let p={email:""};function g({onClose:e}){let t=(0,i.useDispatch)(),[a,s]=(0,h.useState)(""),[o,m]=(0,h.useState)(""),[g,y]=(0,h.useState)(""),{t:f}=(0,u.useTranslation)(),k=async(a,{setSubmitting:s,resetForm:r})=>{let o=a.email.trim();try{await t((0,l.WT)(o)),d.toast.success("You have successfully reset email!"),m("Check your email for the reset link!")}catch(e){m("Failed to send reset email. Try again.")}finally{s(!1),r(),setTimeout(()=>{e()},500)}};return(0,r.jsxs)("div",{className:n().item,children:[(0,r.jsx)(d.ToastContainer,{position:"top-right",autoClose:5e3,hideProgressBar:!1,newestOnTop:!0,closeOnClick:!0,rtl:!1,pauseOnFocusLoss:!0,draggable:!0,pauseOnHover:!0}),(0,r.jsx)(c.Formik,{initialValues:p,onSubmit:k,children:({handleSubmit:e})=>(0,r.jsxs)(c.Form,{onSubmit:e,onClick:e=>e.stopPropagation(),children:[(0,r.jsxs)("div",{className:n().items,children:[(0,r.jsx)("label",{className:n().label,children:"Email"}),(0,r.jsx)(c.Field,{className:n().inp,type:"email",name:"email",placeholder:"Enter email..."})]}),(0,r.jsx)("div",{className:n().btn,children:(0,r.jsx)("button",{className:n().LoginForm,type:"submit",children:f("auth.btnsend")})}),g&&(0,r.jsx)("p",{style:{color:"red"},children:g})]})})]})}s()}catch(e){s(e)}})}};